CREATE TABLE JSONTABLE
(
  ID bigserial,
  TYPE integer not null,
  DT_CREATE timestamp not null default localtimestamp,
  DT_CHANGE timestamp not null,
  NM_COLUMN varchar(200),
  PARAMS jsonb
);

create table coltable
(
ID bigserial,
TYPE integer not null,
DT_CREATE timestamp not null default localtimestamp,
DT_CHANGE timestamp not null,
NM_COLUMN varchar(200),
PARAM1 NUMERIC(8,2),
PARAM2 DATE,
PARAM3 INTEGER,
PARAM4 VARCHAR(200),
PARAM5 INTEGER[],
PARAM6 INTEGER,
PARAM7 VARCHAR(200),
PARAM8 DATE,
PARAM9 INTEGER,
PARAM10 VARCHAR(200),
PARAM11 INTEGER[],
PARAM12 DATE,
PARAM13 TEXT,
PARAM14 INTEGER,
PARAM15 VARCHAR(200),
PARAM16 NUMERIC(8,2),
PARAM17 INTEGER,
PARAM18 INTEGER,
PARAM19 INTEGER,
PARAM20 INTEGER[],
PARAM21 TEXT,
PARAM22 DATE,
PARAM23 VARCHAR(200),
PARAM24 INTEGER,
PARAM25 INTEGER,
PARAM26 DATE,
PARAM27 TEXT,
PARAM28 VARCHAR(200),
PARAM29 NUMERIC(8,2),
PARAM30 INTEGER[],
PARAM31 DATE,
PARAM32 NUMERIC(8,2),
PARAM33 BOOLEAN,
PARAM34 INTEGER,
PARAM35 NUMERIC(8,2),
PARAM36 VARCHAR(200),
PARAM37 INTEGER,
PARAM38 INTEGER,
PARAM39 NUMERIC(8,2),
PARAM40 DATE,
PARAM41 INTEGER,
PARAM42 DATE,
PARAM43 VARCHAR(200),
PARAM44 INTEGER[],
PARAM45 BOOLEAN,
PARAM46 BOOLEAN,
PARAM47 DATE,
PARAM48 INTEGER,
PARAM49 NUMERIC(8,2),
PARAM50 VARCHAR(200),
PARAM51 VARCHAR(200),
PARAM52 VARCHAR(200),
PARAM53 INTEGER[],
PARAM54 DATE,
PARAM55 INTEGER,
PARAM56 INTEGER,
PARAM57 DATE,
PARAM58 NUMERIC(8,2),
PARAM59 TEXT,
PARAM60 INTEGER,
PARAM61 INTEGER,
PARAM62 DATE,
PARAM63 INTEGER,
PARAM64 BOOLEAN,
PARAM65 INTEGER,
PARAM66 DATE,
PARAM67 INTEGER[],
PARAM68 NUMERIC(8,2),
PARAM69 VARCHAR(200),
PARAM70 INTEGER,
PARAM71 INTEGER,
PARAM72 VARCHAR(200),
PARAM73 VARCHAR(200),
PARAM74 TEXT,
PARAM75 INTEGER,
PARAM76 INTEGER[],
PARAM77 INTEGER[],
PARAM78 VARCHAR(200),
PARAM79 BOOLEAN,
PARAM80 DATE,
PARAM81 BOOLEAN,
PARAM82 INTEGER,
PARAM83 NUMERIC(8,2),
PARAM84 VARCHAR(200),
PARAM85 TEXT,
PARAM86 INTEGER[],
PARAM87 BOOLEAN,
PARAM88 NUMERIC(8,2),
PARAM89 DATE,
PARAM90 VARCHAR(200),
PARAM91 DATE,
PARAM92 INTEGER[],
PARAM93 VARCHAR(200),
PARAM94 INTEGER,
PARAM95 INTEGER[],
PARAM96 VARCHAR(200),
PARAM97 VARCHAR(200),
PARAM98 INTEGER[],
PARAM99 INTEGER,
PARAM100 BOOLEAN,
PARAM101 DATE,
PARAM102 BOOLEAN,
PARAM103 INTEGER,
PARAM104 VARCHAR(200),
PARAM105 BOOLEAN,
PARAM106 INTEGER,
PARAM107 DATE,
PARAM108 BOOLEAN,
PARAM109 NUMERIC(8,2),
PARAM110 NUMERIC(8,2),
PARAM111 TEXT,
PARAM112 INTEGER[],
PARAM113 INTEGER[],
PARAM114 VARCHAR(200),
PARAM115 VARCHAR(200),
PARAM116 INTEGER[],
PARAM117 TEXT,
PARAM118 DATE,
PARAM119 INTEGER[],
PARAM120 VARCHAR(200),
PARAM121 INTEGER[],
PARAM122 DATE,
PARAM123 TEXT,
PARAM124 INTEGER,
PARAM125 BOOLEAN,
PARAM126 INTEGER[],
PARAM127 VARCHAR(200),
PARAM128 BOOLEAN,
PARAM129 NUMERIC(8,2),
PARAM130 INTEGER[],
PARAM131 DATE,
PARAM132 VARCHAR(200),
PARAM133 VARCHAR(200),
PARAM134 INTEGER,
PARAM135 INTEGER[],
PARAM136 INTEGER[],
PARAM137 BOOLEAN,
PARAM138 DATE,
PARAM139 INTEGER[],
PARAM140 BOOLEAN,
PARAM141 NUMERIC(8,2),
PARAM142 INTEGER,
PARAM143 INTEGER,
PARAM144 NUMERIC(8,2),
PARAM145 VARCHAR(200),
PARAM146 NUMERIC(8,2),
PARAM147 BOOLEAN,
PARAM148 INTEGER,
PARAM149 TEXT,
PARAM150 VARCHAR(200),
PARAM151 BOOLEAN,
PARAM152 DATE,
PARAM153 INTEGER[],
PARAM154 INTEGER[],
PARAM155 DATE,
PARAM156 INTEGER[],
PARAM157 NUMERIC(8,2),
PARAM158 VARCHAR(200),
PARAM159 VARCHAR(200),
PARAM160 VARCHAR(200),
PARAM161 INTEGER,
PARAM162 INTEGER,
PARAM163 NUMERIC(8,2),
PARAM164 INTEGER[],
PARAM165 NUMERIC(8,2),
PARAM166 INTEGER,
PARAM167 DATE,
PARAM168 BOOLEAN,
PARAM169 NUMERIC(8,2),
PARAM170 NUMERIC(8,2),
PARAM171 DATE,
PARAM172 VARCHAR(200),
PARAM173 DATE,
PARAM174 INTEGER[],
PARAM175 VARCHAR(200),
PARAM176 INTEGER,
PARAM177 INTEGER,
PARAM178 INTEGER,
PARAM179 VARCHAR(200),
PARAM180 INTEGER,
PARAM181 INTEGER,
PARAM182 INTEGER,
PARAM183 BOOLEAN,
PARAM184 BOOLEAN,
PARAM185 DATE,
PARAM186 NUMERIC(8,2),
PARAM187 VARCHAR(200),
PARAM188 INTEGER,
PARAM189 INTEGER[],
PARAM190 VARCHAR(200),
PARAM191 BOOLEAN,
PARAM192 VARCHAR(200),
PARAM193 VARCHAR(200),
PARAM194 VARCHAR(200),
PARAM195 DATE,
PARAM196 INTEGER,
PARAM197 VARCHAR(200),
PARAM198 VARCHAR(200),
PARAM199 INTEGER,
PARAM200 DATE
);

--gin index creation
select 'CREATE INDEX coltable_idx'||ordinal_position||' ON '||table_name||'USING gin('||column_name||');'
from information_schema.columns where table_name in ('coltable')
and data_type in ('ARRAY') and ordinal_position > 5
and ordinal_position%2=0;
--Запрос успешно выполнен без возвращаемых данных за 21197 мс.

--indexes
select 'CREATE INDEX coltable_idx'||ordinal_position||' ON '||table_name||'('||column_name||');'
from information_schema.columns where table_name in ('coltable')
and data_type in ('number','varchar(200)','integer') 
and ordinal_position > 5
and ordinal_position%2=0;
--Запрос успешно выполнен без возвращаемых данных за 36041 мс.

--json indexes

select 'CREATE INDEX coltable_idx'||ordinal_position||' ON jsontable(params->'''||uper(column_name)||''');'
from information_schema.columns where table_name in ('coltable')
and data_type in ('number','varchar(200)','integer') 
and ordinal_position > 5
and ordinal_position%2=0;
--Запрос успешно выполнен без возвращаемых данных за 453816 мс.
--Запрос успешно выполнен без возвращаемых данных за 411703 мс.